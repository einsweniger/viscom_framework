{
  "Shader": {
    "ver": "0.1",
    "info": {
      "id": "XslcD7",
      "date": "1488499719",
      "viewed": 353,
      "name": "Tunnel Beauty 6 Reduced (583c) ",
      "username": "aiekick",
      "description": "Reduced version of [url=https://www.shadertoy.com/view/4l3SzH]Tunnel Beauty 6[/url]\nReduce in progress, a litle bit altered of the color but 1916c to 583c",
      "likes": 5,
      "published": 3,
      "flags": 0,
      "tags": [
        "tunnelbeauty6"
      ],
      "hasliked": 0
    },
    "renderpass": [
      {
        "inputs": [],
        "outputs": [
          {
            "id": 37,
            "channel": 0
          }
        ],
        "code": "// Created by Stephane Cuillerdier - @Aiekick/2016\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n//* webgl2 only alternative in 580c\n\n#define Z(a) mat3(cos(a),-sin(a),0,sin(a),cos(a),p-p,1)\n#define E (n=n.zxy, d(p+n)-d(p-n))\n\nfloat d(vec3 p)\n{\n    p += sin(((p+cos(p.z * .2)) * Z(p.z * .1) + sin(p.zxy * .5) * .5) * Z(p.z * .2) * .2).zxy * 1.5;\n    return 9. - abs(p * Z(p.z * .05) * .5).y;\n}\n\nvoid mainImage( out vec4 f, vec2 g )\n{\n    vec3 n = iResolution,\n         r = normalize(vec3(g+g-n.xy,n.y)), // rd\n         p = n -= n; \t\t\t\t\t\t// ro, normal\n    p.z = iTime*15.;\n    int i=70;\n    for (;i-->0;n.z = .1) \n        p += r * d(p) *.3;  \t\t\t\t// rm\n    n = normalize(vec3(E,E,E)); \t\t\t// normal\n    float h = d(p - n * .02), \t\t\t\t// halo\n          s = 2e2,\n          e = dot(n,r);\n    for (;i++<9;) \n        s -= 2e2*d(p -= n * .02); \t\t\t// deep subdensity\n    f.rgb = \t\t\t\t\t\t\t\t// color composition\n        (pow( e, 9. ) - e - clamp(vec3(s, log(s)-6.6, 0),0.,1.) * s / 2e3 * d(p - n * 5.) + vec3(2,1,.4) * h) / 3. +                          \t// bb + sss\n        pow( max(dot( reflect(r,n), -r ),0.), 16.);\t// spe\n}/**/\n\n/* webgl2 only 644 c\n\n#define Z(a) mat3(cos(a),-sin(a),0,sin(a),cos(a),p-p,1)\n#define E (n=n.zxy, d(p+n)-d(p-n))\n\nfloat d(vec3 p)\n{\n    p += sin(((p+cos(p.z * .2)) * Z(p.z * .1) + sin(p.zxy * .5) * .5) * Z(p.z * .2) * .2).zxy * 1.5;\n    return 9. - abs(p * Z(p.z * .05) * .5).y;\n}\n\nvoid mainImage( out vec4 f, vec2 g )\n{\n    vec3 n = iResolution,\n         r = normalize(vec3(g+g-n.xy,n.y)), // rd\n         p = n -= n; \t\t\t\t\t\t// ro, normal\n    \n    p.z = iTime*15.;\n    \n    int i=90;\n    for (;i-->0;) \n        p += r * d(p) *.2;  \t\t\t\t// rm\n\n    n.z = .1;\n    n = normalize(vec3(E,E,E)); \t\t\t// normal\n    float h = d(p - n * .02), \t\t\t\t// halo\n          s = 2e2,\n          e = dot(n,r);\n    \n    for (;i++<9;) \n        s -= 2e2*d(p -= n * .02); \t\t\t// deep subdensity\n    \n    f.rgb = \t\t\t\t\t\t\t\t// color composition\n        (pow( clamp( 1. + e,0.,1.), 4. )  \t// fre\n        - e                               \t// diff\n        - clamp(vec3(                     \t// blackbody\n            22e4 / pow(s,1.5) + .6,      \t// blackbody\n       \t    .4 * log(s) - 2.4,            \t// blackbody\n       \t    .8 * log(s) - 6.),            \t// blackbody\n            0.,1.) * ((s < 1e3)?s/1e3:1.) \t// blackbody\n        * d(p - n * 3.)                   \t// simple subdensity\n        + vec3(2,1,.4) * h                \t// rm halo\n        ) / 4. +                          \t// bb + sss\n        pow(max( dot( \n            reflect(r,n), -r ), 0. ),16.);\t// spe\n}/**/\n\n/* new alternative in color but shortest 581c\n#define Z(a) mat3(cos(a),-sin(a),0,sin(a),cos(a),p-p,1)\n#define E (n=n.zxy, d(p+n)-d(p-n))\n\nfloat d(vec3 p)\n{\n    p += sin(((p+cos(p.z * .2)) * Z(p.z * .1) + sin(p.zxy * .5) * .5) * Z(p.z * .2) * .2).zxy * 1.5;\n    return 9. - abs(p * Z(p.z * .05) * .5).y;\n}\n\nvoid mainImage( out vec4 f, vec2 g )\n{\n    vec3 n = iResolution,\n         r = normalize(vec3(g+g-n.xy,n.y)), // rd\n         p = n -= n; \t\t\t\t\t\t// ro, normal\n    p.z = iTime*15.;\n    int i=70;\n    for (;i-->0;) \n        p += r * d(p) *.3;  \t\t\t\t// rm\n    n.z = .1;\n    n = normalize(vec3(E,E,E)); \t\t\t// normal\n    float h = d(p - n * .02), \t\t\t\t// halo\n          s = 2e2,\n          e = dot(n,r);\n    for (;i++<9;) \n        s -= 2e2*d(p -= n * .02); \t\t\t// deep subdensity\n    f.rgb = \t\t\t\t\t\t\t\t// color composition\n        (pow( e, 9. ) - e - clamp(vec3(s, log(s)-6.6, 0),0.,1.) * s / 2e3 * d(p - n * 5.) + vec3(2,1,.4) * h) / 3. +                          \t// bb + sss\n        pow( (dot( reflect(r,n), -r ),0.), 16.);\t// spe\n}/**/\n\n/* last version 712c webgl1 compatible\n#define R(a) mat3(cos(a),-sin(a),0,sin(a),cos(a),0,0,0,1)\n#define E (n=n.zxy, df(p+n)-df(p-n))\n\nfloat df(vec3 p)\n{\n\tvec3 q = p;\n    q += cos(q.z * .2);\n\tq *= R(q.z * .1);\n    q += sin(q.zxy * .5) * .5;\n\tq *= R(q.z * .2);\n    p += sin(q.zxy * .2) * 1.5;\n\tp *= R(p.z * .05);\n    return 9. - abs(p.y * .5);\n}\n\nvoid mainImage( out vec4 f, vec2 g )\n{\n\tvec3 \t\n        z = iResolution,\t\t\t\t\t\t\t// size\n\t\tp = vec3(0,0, iTime * 15.), \t\t\t// ro\n\t\trd = normalize(vec3(g+g-z.xy,z.y)),\t\t\t// rd\n        n = p-p; \t\t\t\t\t\t\t\t\t// normal\n    \tfor (int i=0; i++<90;) \n        \tp += rd * df(p) *.2;\t\t\t\t\t// rm\n    \tn.z=.1;\n    \tn = normalize(vec3(E,E,E));\t\t\t\t\t// normal\n    float h = df(p - n * .02),s=h;\t\t\t\t\t// halo\n    for (int i=0;i<9;i++) \n        s += df(p -= n * .02);\t\t\t\t\t\t// deep subdensity\n    s = 2e2 * (1.-s);\t\t\t\t\t\t\t\t// blackbody\t\t\t\t\n    f.rgb = \t\t\t\t\t\t\t\t\t\t// color composition\n        (dot( n, -rd ) \t\t\t\t\t\t\t\t// diff\n        + pow( clamp( 1. + dot(n,rd),0.,1.), 4. ) \t// fre\n        + clamp(vec3(\t\t\t\t\t\t\t\t// blackbody\n            22e4 * pow(s,-1.5) + .6,\t\t\t\t// blackbody\n       \t\t.4 * log(s) - 2.4,\t\t\t\t\t\t// blackbody\n       \t\t.8 * log(s) - 6.),\t\t\t\t\t\t// blackbody\n    \t\t0.,1.) * ((s < 1e3)?s/1e3:1.) \t\t\t// blackbody\n        * -df(p - n * 3.)\t\t\t\t\t\t\t// simple subdensity\n        + vec3(2,1,.4) * h \t\t\t\t\t\t\t// rm halo\n        ) * .25 + \t\t\t\t\t\t\t\t\t// bb + sss\n        pow(clamp( dot( \n            reflect(rd,n), -rd ), 0., 1. ),16.); \t// spe\n}/**/\n",
        "name": "Image",
        "description": "",
        "type": "image"
      }
    ]
  }
}