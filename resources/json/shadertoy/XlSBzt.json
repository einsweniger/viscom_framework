{
  "Shader": {
    "ver": "0.1",
    "info": {
      "id": "XlSBzt",
      "date": "1516782786",
      "viewed": 134,
      "name": "Layer blending algorithm\u56fe\u5c42\u6df7\u5408\u7b97\u6cd5",
      "username": "liuhaidong",
      "description": "\u5305\u542b\u4f8b\u5b50\n\u4e0d\u900f\u660e\u5ea6\uff0c\u6b63\u7247\u53e0\u5e95\uff0c\u989c\u8272\u52a0\u6df1\uff0c\u989c\u8272\u51cf\u6de1\u3002\n\u7ebf\u6027\u52a0\u6df1\uff0c\u7ebf\u6027\u51cf\u6de1\uff0c\u53d8\u4eae\uff0c\u53d8\u6697\u3002\n\u6ee4\u8272\uff0c \u53e0\u52a0\uff0c \u67d4\u5149\uff0c \u5f3a\u5149\u3002\n\u4eae\u5149\uff0c \u70b9\u5149\uff0c \u7ebf\u6027\u5149\uff0c \u5b9e\u8272\u6df7\u5408\u3002\n\n",
      "likes": 1,
      "published": 3,
      "flags": 0,
      "tags": [
        "layerblendingalgorithm"
      ],
      "hasliked": 0
    },
    "renderpass": [
      {
        "inputs": [
          {
            "id": 5,
            "src": "/media/a/8de3a3924cb95bd0e95a443fff0326c869f9d4979cd1d5b6e94e2a01f5be53e9.jpg",
            "ctype": "texture",
            "channel": 0,
            "sampler": {
              "filter": "mipmap",
              "wrap": "repeat",
              "vflip": "true",
              "srgb": "false",
              "internal": "byte"
            },
            "published": 1
          },
          {
            "id": 8,
            "src": "/media/a/52d2a8f514c4fd2d9866587f4d7b2a5bfa1a11a0e772077d7682deb8b3b517e5.jpg",
            "ctype": "texture",
            "channel": 1,
            "sampler": {
              "filter": "mipmap",
              "wrap": "repeat",
              "vflip": "true",
              "srgb": "false",
              "internal": "byte"
            },
            "published": 1
          }
        ],
        "outputs": [
          {
            "id": 37,
            "channel": 0
          }
        ],
        "code": "\n//\u4e0d\u900f\u660e\u6a21\u5f0f \n//d\u8868\u793a\u6539\u5c42\u7684\u900f\u660e\u5ea6 (0-1.0)\nvec3 matteOpacityMode (vec3 color, vec3 blendColor, float d)\n{\n    vec3 rgb = d*color.rgb + (1.0-d)*blendColor.rgb;\n    return rgb;\n}\n\n//\u6b63\u7247\u53e0\u5e95\u6a21\u5f0f\n//\u4efb\u4f55\u989c\u8272\u548c\u9ed1\u8272\u6b63\u7247\u53e0\u5e95\u5f97\u5230\u7684\u4efb\u7136\u662f\u9ed1\u8272\uff0c\u4efb\u4f55\u989c\u8272\u548c\u767d\u8272\u6267\u884c\u6b63\u7247\u53e0\u5e95\u5219\u4fdd\u6301\u539f\u6765\u7684\u989c\u8272\u4e0d\u53d8.\n//\u800c\u4e0e\u5176\u4ed6\u989c\u8272\u6267\u884c\u6b64\u6a21\u5f0f\u4f1a\u4ea7\u751f\u6697\u5ba4\u4e2d\u4ee5\u6b64\u79cd\u989c\u8272\u7167\u660e\u7684\u6548\u679c\u3002 \nvec3 multiplyMode (vec3 color1 ,vec3 color2)\n{\n    vec3 rgb = color1.rgb *color2.rgb;\n    return rgb;\n} \n\n//\u989c\u8272\u52a0\u6df1\u6a21\u5f0f\n//\u5982\u679c\u4e0a\u5c42\u8d8a\u6697\uff0c\u5219\u4e0b\u5c42\u83b7\u53d6\u7684\u5149\u8d8a\u5c11\uff0c\u5982\u679c\u4e0a\u5c42\u4e3a\u5168\u9ed1\u8272\uff0c\u5219\u4e0b\u5c42\u8d8a\u9ed1\n//\u5982\u679c\u4e0a\u5c42\u4e3a\u5168\u767d\u8272\uff0c\u5219\u6839\u672c\u4e0d\u4f1a\u5f71\u54cd\u4e0b\u5c42\u3002\u7ed3\u679c\u6700\u4eae\u7684\u5730\u65b9\u4e0d\u4f1a\u9ad8\u4e8e\u4e0b\u5c42\u7684\u50cf\u7d20\u503c \nvec3 colorBurnMode (vec3 colorA, vec3 colorB)\n{\n\n    vec3 rgb = 1.0 - (1.0 - colorB)/colorA;\n    return rgb;\n}\n\n//\u989c\u8272\u51cf\u6de1\u6a21\u5f0f\n//\u4e0a\u5c42\u7684\u4eae\u5ea6\u51b3\u5b9a\u4e86\u4e0b\u5c42\u7684\u66b4\u9732\u7a0b\u5ea6\u3002\u5982\u679c\u4e0a\u5c42\u8d8a\u4eae\uff0c\u4e0b\u5c42\u83b7\u53d6\u7684\u5149\u8d8a\u591a\uff0c\u4e5f\u5c31\u662f\u8d8a\u4eae\u3002\n//\u5982\u679c\u4e0a\u5c42\u662f\u7eaf\u9ed1\u8272\uff0c\u4e5f\u5c31\u662f\u6ca1\u6709\u4eae\u5ea6\uff0c\u5219\u6839\u672c\u4e0d\u4f1a\u5f71\u54cd\u4e0b\u5c42\u3002\u5982\u679c\u4e0a\u5c42\u662f\u7eaf\u767d\u8272\uff0c\u5219\u4e0b\u5c42\u9664\u4e86\u50cf\u7d20\u4e3a255\u7684\u5730\u65b9\u66b4\u9732\u5916\uff0c\u5176\u4ed6\u5730\u65b9\u5168\u90e8\u4e3a\u767d\u8272\uff08\u4e5f\u5c31\u662f255\uff0c\u4e0d\u66b4\u9732\uff09\u3002\n//\u7ed3\u679c\u6700\u9ed1\u7684\u5730\u65b9\u4e0d\u4f1a\u4f4e\u4e8e\u4e0b\u5c42\u7684\u50cf\u7d20\u503c\u3002\nvec3 colorDodgeMode (vec3 colorA, vec3 colorB)\n{\n    vec3 rgb = colorB/(1.0-colorA);\n    return rgb;\n}\n\n//\u7ebf\u6027\u52a0\u6df1\u6a21\u5f0f\n//\u5982\u679c\u4e0a\u4e0b\u5c42\u7684\u50cf\u7d20\u503c\u4e4b\u548c\u5c0f\u4e8e255\uff0c\u8f93\u51fa\u7ed3\u679c\u5c06\u4f1a\u662f\u7eaf\u9ed1\u8272\u3002\u5982\u679c\u5c06\u4e0a\u5c42\u53cd\u76f8\u3002\nvec3 linearBurnMode  (vec3 colorA, vec3 colorB)\n{\n    vec3 rgb = colorB + colorA -1.0;\n    return rgb;\n}\n\n//\u7ebf\u6027\u51cf\u6de1\n//\u5c06\u4e0a\u4e0b\u5c42\u7684\u8272\u5f69\u503c\u76f8\u52a0\u3002\u7ed3\u679c\u5c06\u66f4\u4eae \nvec3 linearDodgeMode  (vec3 colorA, vec3 colorB)\n{\n    vec3 rgb = colorB + colorA;\n    return rgb;\n}\n\n//\u53d8\u4eae\n//\u53d6\u8272\u5f69\u503c\u8f83\u5927\u7684\uff08\u4e5f\u5c31\u662f\u8f83\u4eae\u7684\uff09\u4f5c\u4e3a\u8f93\u51fa\u7ed3\u679c\u3002 \nvec3 lightenMode (vec3 colorA, vec3 colorB)\n{\n    float r = colorB.r<=colorA.r ? colorA.r : colorB.r;\n    float g = colorB.g<=colorA.g ? colorA.g : colorB.g;\n    float b = colorB.b<=colorA.b ? colorA.b : colorB.b;\n    return vec3(r,g,b);    \n}\n\n//\u53d8\u6697\n//\u53d6\u8272\u5f69\u503c\u8f83\u5c0f\u7684\uff08\u4e5f\u5c31\u662f\u8f83\u4eae\u7684\uff09\u4f5c\u4e3a\u8f93\u51fa\u7ed3\u679c\u3002 \nvec3 deepeningMode (vec3 colorA, vec3 colorB)\n{\n    float r = colorB.r<=colorA.r ? colorB.r : colorA.r;\n    float g = colorB.g<=colorA.g ? colorB.g : colorA.g;\n    float b = colorB.b<=colorA.b ? colorB.b : colorA.b;\n    return vec3(r,g,b);    \n}\n\n//\u6ee4\u8272\u6a21\u5f0f\n//\u5b83\u662f\u5c06\u4e24\u4e2a\u989c\u8272\u7684\u4e92\u8865\u8272\u7684\u50cf\u7d20\u503c\u76f8\u4e58\uff0c\u7136\u540e\u9664\u4ee5255\u5f97\u5230\u7684\u6700\u7ec8\u8272\u7684\u50cf\u7d20\u503c\u3002\u901a\u5e38\u6267\u884c\u6ee4\u8272\u6a21\u5f0f\u540e\u7684\u989c\u8272\u90fd\u8f83\u6d45\u3002\n//\u4efb\u4f55\u989c\u8272\u548c\u9ed1\u8272\u6267\u884c\u6ee4\u8272\uff0c\u539f\u8272\u4e0d\u53d7\u5f71\u54cd;\u4efb\u4f55\u989c\u8272\u548c\u767d\u8272\u6267\u884c\u6ee4\u8272\u5f97\u5230\u7684\u662f\u767d\u8272\uff1b\u800c\u4e0e\u5176\u4ed6\u989c\u8272\u6267\u884c\u6ee4\u8272\u4f1a\u4ea7\u751f\u6f02\u767d\u7684\u6548\u679c\u3002\nvec3 screenMode (vec3 colorA, vec3 colorB)\n{\n    vec3 rgb = 1.0 - (1.0- colorA)*(1.0 - colorB);\n    return rgb;\n}\n\n//\u53e0\u52a0\u6a21\u5f0f\nfloat overlayFloat (float rgbA,float rgbB)\n{\n    return rgbB<=0.5 ? (2.0*rgbB*rgbA) : 1.0 - 2.0*(1.0-rgbA)*(1.0-rgbB);\n}\n\nvec3 overlayMode (vec3 colorA, vec3 colorB)\n{\n    \n    float r = overlayFloat(colorA.r,colorB.r);\n    float g = overlayFloat(colorA.g,colorB.g);\n    float b = overlayFloat(colorA.b,colorB.b);\n    return vec3(r,g,b);\n}\n\n//\u67d4\u5149\u6a21\u5f0f\n//\u6839\u636e\u7ed8\u56fe\u8272\u7684\u660e\u6697\u7a0b\u5ea6\u6765\u51b3\u5b9a\u6700\u7ec8\u8272\u662f\u53d8\u4eae\u8fd8\u662f\u53d8\u6697\uff0c\u5f53\u7ed8\u56fe\u8272\u6bd450%\u7684\u7070\u8981\u4eae\u65f6\uff0c\u5219 \u5e95\u8272\u56fe\u50cf\u53d8\u4eae\u3002\n//\u5f53\u7ed8\u56fe\u8272\u6bd450%\u7684\u7070\u8981\u6697\u65f6\uff0c\u5219\u5e95\u8272\u56fe\u50cf\u5c31\u53d8\u6697\u3002\u5982\u679c\u7ed8\u56fe\u8272\u6709\u7eaf\u9ed1\u8272\u6216\u7eaf\u767d\u8272\uff0c\u6700\u7ec8\u8272\u4e0d\u662f\u9ed1\u8272\u6216\u767d\u8272\uff0c\u800c\u662f\u7a0d\u5fae\u53d8\u6697\u6216\u53d8\u4eae\u3002\n//\u5982\u679c\u5e95\u8272\u662f\u7eaf\u767d\u8272\u6216\u7eaf\u9ed1\u8272\uff0c\u4e0d\u4ea7\u751f\u4efb\u4f55\u6548\u679c\u3002\u6b64\u6548\u679c\u4e0e\u53d1\u6563\u7684\u805a\u5149\u706f\u7167\u5728\u56fe\u50cf\u4e0a\u76f8\u4f3c\u3002 \n\nfloat softLightFloat (float rgbA,float rgbB)\n{    \n    if(rgbA<=0.5)\n    {\n     \treturn (2.0*rgbA - 1.0) *(rgbB-rgbB*rgbA) +rgbB;   \n    }\n    else\n    {\n     \treturn (2.0*rgbA - 1.0) *(sqrt(rgbB)-rgbB) +rgbB;   \n    }    \n}\n\nvec3 softLightMode (vec3 colorA, vec3 colorB)\n{\n    float r = softLightFloat(colorA.r,colorB.r);\n    float g = softLightFloat(colorA.g,colorB.g);\n    float b = softLightFloat(colorA.b,colorB.b);\n    return vec3(r,g,b);\n}\n\n//\u5f3a\u5149\u6a21\u5f0f\n//\u5f53\u7ed8\u56fe\u8272\u6bd450%\u7684\u7070\u8981\u4eae \u65f6\uff0c\u5219\u5e95\u8272\u53d8\u4eae\uff0c\u5c31\u6267\u884c\u201c\u6ee4\u8272\u201d\u6a21\u5f0f\u4e00\u6837\uff0c\u8fd9\u5bf9\u589e\u52a0\u56fe\u50cf\u7684\u9ad8\u5149\u975e\u5e38\u6709\u5e2e\u52a9\uff1b\n//\u5f53\u7ed8\u56fe\u8272\u6bd450%\u7684\u7070\u8981\u6697\u65f6\uff0c\u5219\u5e95\u8272\u53d8\u6697\uff0c\u5c31\u6267\u884c\u201c\u6b63\u7247\u53e0\u5e95\u201d\u6a21\u5f0f\u4e00\u6837\uff0c\u53ef\u589e\u52a0 \u56fe\u50cf\u7684\u6697\u90e8\u3002\n//\u5f53\u7ed8\u56fe\u8272\u662f\u7eaf\u767d\u8272\u6216\u9ed1\u8272\u65f6\u5f97\u5230\u7684\u662f\u7eaf\u767d\u8272\u548c\u9ed1\u8272\u3002\u6b64\u6548\u679c\u4e0e\u8000\u773c\u7684\u805a\u5149\u706f\u7167\u5728\u56fe\u50cf\u4e0a\u76f8\u4f3c\u3002 \nfloat hardLightFloat (float rgbA,float rgbB)\n{\n\n    if(rgbA<=0.5)\n    {\n     \treturn 2.0*rgbA*rgbB;   \n    }\n    else\n    {\n     \treturn 1.0 - 2.0*(1.0-rgbA)*(1.0-rgbB);   \n    }    \n}\n\nvec3 hardLightMode (vec3 colorA, vec3 colorB)\n{\n    float r = hardLightFloat(colorA.r,colorB.r);\n    float g = hardLightFloat(colorA.g,colorB.g);\n    float b = hardLightFloat(colorA.b,colorB.b);\n    return vec3(r,g,b);\n}\n\n//\u4eae\u5149\u6a21\u5f0f\n//\u6839\u636e\u7ed8\u56fe\u8272\u901a\u8fc7\u589e\u52a0\u6216\u964d\u4f4e\u201c\u5bf9\u6bd4\u5ea6\u201d\uff0c\u52a0\u6df1\u6216\u51cf\u6de1\u989c\u8272\u3002\n//\u5982\u679c\u7ed8\u56fe\u8272\u6bd450%\u7684\u7070\u4eae\uff0c\u56fe\u50cf\u901a\u8fc7\u964d\u4f4e\u5bf9\u6bd4\u5ea6\u88ab\u7167\u4eae\uff0c\n//\u5982\u679c\u7ed8\u56fe\u8272\u6bd450%\u7684\u7070\u6697\uff0c\u56fe\u50cf\u901a\u8fc7\u589e\u52a0\u5bf9\u6bd4\u5ea6\u53d8\u6697\u3002 \nfloat vividLightFloat (float rgbA,float rgbB)\n{\n\n    if(rgbA<=0.5)\n    {\n     \treturn 1.0 - (1.0-rgbB)/(2.0*rgbA);   \n    }\n    else\n    {\n     \treturn rgbB/(2.0*(1.0-rgbA));   \n    }    \n}\nvec3 vividLightMode (vec3 colorA, vec3 colorB)\n{\n    float r = vividLightFloat(colorA.r,colorB.r);\n    float g = vividLightFloat(colorA.g,colorB.g);\n    float b = vividLightFloat(colorA.b,colorB.b);\n    return vec3(r,g,b);\n}\n\n//\u70b9\u5149\u6a21\u5f0f\nfloat pinLightFloat (float rgbA,float rgbB)\n{\n    if(rgbA<=0.5)\n    {\n     \treturn min(2.0*rgbA,rgbB);   \n    }\n    else\n    {\n        return max(2.0*(rgbA-0.5),rgbB);   \n    }    \n}\nvec3 pinLightMode (vec3 colorA, vec3 colorB)\n{\n    float r = pinLightFloat(colorA.r,colorB.r);\n    float g = pinLightFloat(colorA.g,colorB.g);\n    float b = pinLightFloat(colorA.b,colorB.b);\n    return vec3(r,g,b);\n}\n\n//\u7ebf\u6027\u5149\u6a21\u5f0f\nvec3 lineLightMode (vec3 colorA, vec3 colorB)\n{\n    return colorB + 2.0 * colorA -1.0;\n}\n\n\n//\u5b9e\u8272\u6df7\u5408\u6a21\u5f0f\n//\u8be5\u6a21\u5f0f\u5bfc\u81f4\u4e86\u6700\u7ec8\u7ed3\u679c\u4ec5\u5305\u542b6\u79cd\u57fa\u672c\u989c\u8272\uff0c\u6bcf\u4e2a\u901a\u9053\u8981\u4e48\u5c31\u662f0\uff0c\u8981\u4e48\u5c31\u662f255\u3002\nfloat hardMixFloat (float rgbA,float rgbB)\n{\n    if(rgbA<1.0-rgbB)\n    {\n        return 0.0;\n    }\n    else\n    {\n        return 1.0;\n    }\n}\n\nvec3 hardMixMode (vec3 colorA, vec3 colorB)\n{\n    float r = hardMixFloat(colorA.r,colorB.r);\n    float g = hardMixFloat(colorA.g,colorB.g);\n    float b = hardMixFloat(colorA.b,colorB.b);\n    return vec3(r,g,b);\n}\n\n//\u5dee\u503c\u6a21\u5f0f\n//\u67e5\u770b\u6bcf\u4e2a\u901a\u9053\u4e2d\u7684\u989c\u8272\u4fe1\u606f\uff0c\u6bd4\u8f83\u5e95\u8272\u548c\u7ed8\u56fe\u8272\uff0c\u7528\u8f83\u4eae\u7684\u50cf\u7d20\u70b9\u7684\u50cf\u7d20\u503c\u51cf\u53bb\u8f83\u6697\u7684\u50cf\u7d20\u70b9\u7684\u50cf\u7d20\u503c\u3002\u4e0e\u767d\u8272\u6df7\u5408\u5c06\u4f7f\u5e95\u8272\u53cd\u76f8\uff1b\u4e0e\u9ed1\u8272\u6df7\u5408\u5219\u4e0d\u4ea7\u751f\u53d8\u5316 \nvec3 differenceMode (vec3 colorA, vec3 colorB)\n{\n    return abs(colorA - colorB);\n}\n\n//\u6d88\u9664\u6a21\u5f0f\n//\u4eae\u7684\u56fe\u7247\u533a\u57df\u5c06\u5bfc\u81f4\u53e6\u4e00\u5c42\u7684\u53cd\u76f8\uff0c\u5f88\u6697\u7684\u533a\u57df\u5219\u5c06\u5bfc\u81f4\u53e6\u4e00\u5c42\u5b8c\u5168\u6ca1\u6709\u6539\u53d8 \nvec3 exclusionMode (vec3 colorA, vec3 colorB)\n{\n    return (colorA + colorB)-2.0*colorA*colorB;\n}\n\n\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy / iResolution.xy;\n    \n   \tvec4 texMapColour1 = texture(iChannel0, uv); \n   \tvec4 texMapColour2 = texture(iChannel1, uv); \n    \n    vec4 texMapColour3 = vec4 (exclusionMode(texMapColour1.rgb,texMapColour2.rgb),1.0);\n   \n    fragColor = texMapColour3;\n\n}\n\n\n\n",
        "name": "Image",
        "description": "",
        "type": "image"
      }
    ]
  }
}