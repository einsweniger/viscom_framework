{
  "Shader": {
    "ver": "0.1",
    "info": {
      "id": "XlXfD2",
      "date": "1513270962",
      "viewed": 302,
      "name": "water waves - full dispersion",
      "username": "FabriceNeyret2",
      "description": "splash equation accounting for gravity waves, capillary waves, water depth.\nNot simulated: trocho\u00efd profile\n\nGravity waves: shorter is slower.\nCapillary waves: opposite.\nShallow: caps gravity waves celerity.",
      "likes": 3,
      "published": 3,
      "flags": 0,
      "tags": [
        "fluids"
      ],
      "hasliked": 0
    },
    "renderpass": [
      {
        "inputs": [],
        "outputs": [
          {
            "id": 37,
            "channel": 0
          }
        ],
        "code": "// https://en.wikipedia.org/wiki/Dispersion_(water_waves)\n\n#define rnd(v)   fract( 43758.5453 * sin( (v) * 78.233 ) )\n#define gauss(v) exp(  -.5*(v)*(v) )\n#define tanh(x)  ( abs(x) > 8. ? sign(x) : tanh(x) ) // to allow values larger than 87\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n\tvec2 R = iResolution.xy;\n    U = 20.* ( U+U - R ) / R.y;                      // window radius (m)\n    O -= O;\n    float h = 100.,                                  // water depth (m) \n          t = iTime -9.*step(R.y,200.),              // splash sync for icon and window\n          l = length(U),\n          s = 0.;\n    t = mod( t, 30.) * 2.;\n    \n    for (float k = 6.28/1.; k < 6.28/.01; k++ ) {    // for all wavelengthes\n        float w = sqrt( (9.81*k + 74E-6*k*k*k) * tanh(k*h) ), // w(k) = dispertion relation\n           // w\u00b2 = ( gk + s/r k\u00b3 ) tanh(kh) , g=9.81, s=0.074, r=10\u00b3\n              phi = k*l - w*t ,                      // opt: + rnd(k)*6.28 \n              E = gauss( phi/10. ) / k ;             // emission spectrum in k and spacetime(0)\n           // E = gauss( phi/k )     / k ;             \n           // E = phi<0. ? exp(phi/5.) / k : 0.;\n           // E = ( phi<0. ? exp(phi/10.) : gauss( phi/2. ) ) / k;\n         O += E * cos (phi );                        // wave equation     \n        s += 1./k;\n    }\n    O = .5 + 5.*O/s;              \n}",
        "name": "Image",
        "description": "",
        "type": "image"
      }
    ]
  }
}