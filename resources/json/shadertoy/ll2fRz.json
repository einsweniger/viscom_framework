{
  "Shader": {
    "ver": "0.1",
    "info": {
      "id": "ll2fRz",
      "date": "1514738102",
      "viewed": 253,
      "name": "Simple wave equation",
      "username": "LuisRodriguezRuiz",
      "description": "A simple wave equation implemented as a cellular automaton",
      "likes": 0,
      "published": 3,
      "flags": 32,
      "tags": [
        "wave",
        "cellularautomatonn"
      ],
      "hasliked": 0
    },
    "renderpass": [
      {
        "inputs": [
          {
            "id": 259,
            "src": "/media/previz/buffer02.png",
            "ctype": "buffer",
            "channel": 0,
            "sampler": {
              "filter": "linear",
              "wrap": "clamp",
              "vflip": "true",
              "srgb": "false",
              "internal": "byte"
            },
            "published": 1
          }
        ],
        "outputs": [
          {
            "id": 37,
            "channel": 0
          }
        ],
        "code": "\n\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{ \n    fragColor=texture(iChannel0,fragCoord.xy/iResolution.xy);\n\n}\n",
        "name": "Image",
        "description": "",
        "type": "image"
      },
      {
        "inputs": [
          {
            "id": 258,
            "src": "/media/previz/buffer01.png",
            "ctype": "buffer",
            "channel": 0,
            "sampler": {
              "filter": "linear",
              "wrap": "clamp",
              "vflip": "true",
              "srgb": "false",
              "internal": "byte"
            },
            "published": 1
          }
        ],
        "outputs": [
          {
            "id": 257,
            "channel": 0
          }
        ],
        "code": "void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0,fragCoord.xy/iResolution.xy);\n}\n\n\n",
        "name": "Buf A",
        "description": "",
        "type": "buffer"
      },
      {
        "inputs": [
          {
            "id": 259,
            "src": "/media/previz/buffer02.png",
            "ctype": "buffer",
            "channel": 0,
            "sampler": {
              "filter": "linear",
              "wrap": "clamp",
              "vflip": "true",
              "srgb": "false",
              "internal": "byte"
            },
            "published": 1
          }
        ],
        "outputs": [
          {
            "id": 258,
            "channel": 0
          }
        ],
        "code": "void mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    fragColor = texture(iChannel0,fragCoord.xy/iResolution.xy);\n}\n    \n\n",
        "name": "Buf B",
        "description": "",
        "type": "buffer"
      },
      {
        "inputs": [
          {
            "id": 257,
            "src": "/media/previz/buffer00.png",
            "ctype": "buffer",
            "channel": 1,
            "sampler": {
              "filter": "linear",
              "wrap": "clamp",
              "vflip": "true",
              "srgb": "false",
              "internal": "byte"
            },
            "published": 1
          },
          {
            "id": 258,
            "src": "/media/previz/buffer01.png",
            "ctype": "buffer",
            "channel": 0,
            "sampler": {
              "filter": "linear",
              "wrap": "clamp",
              "vflip": "true",
              "srgb": "false",
              "internal": "byte"
            },
            "published": 1
          }
        ],
        "outputs": [
          {
            "id": 259,
            "channel": 0
          }
        ],
        "code": "const float wave=0.1;\n\n\n\nfloat rnd(vec2 seed)\n{\n    return fract(sin(dot(seed.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n\nfloat getNeighborValue(vec2 pos)\n{   \n  \n  return texture(iChannel0,pos/iResolution.xy).x;  \t\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord )\n{\n   \n    \t float waveValue;\n         float prevValue = texture(iChannel1,fragCoord.xy/iResolution.xy).x;        \n     \t\n         float currentValue = texture(iChannel0,fragCoord.xy/iResolution.xy).x;\t\t\n\t\t\n         if(iFrame==0)        \n             waveValue=rnd(fragCoord.xy);\n         else\n         { \n                   \n            float neighborsValue=(getNeighborValue(fragCoord.xy+vec2(0,-1))+\n                                  getNeighborValue(fragCoord.xy+vec2(0,1))+\n                                  getNeighborValue(fragCoord.xy+vec2(-1,0))+\n                                  getNeighborValue(fragCoord.xy+vec2(1,0)))/4.;\n             \n            \n            waveValue=clamp(2.0*currentValue-prevValue+2.0*wave*(neighborsValue-currentValue),0.0,1.0);\n           \n          }\n              \n        fragColor=vec4(waveValue);\n    \t                                           \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "name": "Buf C",
        "description": "",
        "type": "buffer"
      }
    ]
  }
}